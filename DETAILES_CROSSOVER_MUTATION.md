# 交叉と変異をもう少し詳しく

ここでは **1 点交叉** と **ガウス変異** のコードが  
なぜ “探索” と “局所修正” に対応するのかを式と図で確認します。

---

## 1. 1 点交叉 (one-point)

![one-point](docs/img/one_point.svg)

1. 切断位置 `cut` を 1 ≤ cut ≤ d−1 で選ぶ  
2. 子1 = 親1\[ :cut ] + 親2\[ cut: ]  
   子2 = 親2\[ :cut ] + 親1\[ cut: ]

**効果**  
- 遺伝子空間を *大きく* 移動（探索）  
- ただし親の範囲内なので完全なランダムではない

---

## 2. ガウス変異 (gaussian)

各遺伝子 `x_i` に
```math
x_i \to x_i + \mathcal{N}(0, \sigma^2)
```
を確率 `prob` で加える。

- σ 大 → 粗い探索  
- σ 小 → 微調整 (局所探索)

---

### 範囲クリップ

物理量はしばしば上限/下限がある。  
`np.clip(x, lo, hi)` で **安全柵** を設置。

---

## 3. パラメータと挙動

| シナリオ                | 推奨設定              |
|-------------------------|-----------------------|
| 粗探索したい              | cross rate ≈ 0.9, σ = 0.3 |
| 収束直前に微調整           | cross rate ≈ 0.3, σ = 0.02 |
| 多峰性で局所最適にハマる      | トーナメント k = 2, σ = 0.2 |
| 全く収束しない (発散)       | cross rate ↓, σ ↓        |

---

### まとめ

*交叉 = 大ジャンプ*、*変異 = 小ジャンプ*。  
シンプルに覚えて、まず動かしながら `σ` と `rate` を変えてみよう。
````